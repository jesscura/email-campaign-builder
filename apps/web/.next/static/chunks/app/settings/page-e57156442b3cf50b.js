(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{9326:function(e,t,n){Promise.resolve().then(n.bind(n,7133))},7133:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n(9566),r=n(8590),s=n(976),c=n(3544);function i(){let[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[a,l]=(0,r.useState)({});async function u(){(await fetch("/api/zoho/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?s.A.success("Zoho settings saved"):s.A.error("Failed to save Zoho settings")}async function d(){await fetch("/api/zoho/settings",{method:"DELETE"}),s.A.success("Cleared Zoho settings")}async function h(){let e=await fetch("/api/zoho/auth-url"),t=await e.json();t.url?window.location.href=t.url:s.A.error("Zoho config missing. Enter Client ID (and Secret) or set env vars.")}async function p(){await fetch("/api/zoho/logout",{method:"POST"}),t(!1),i(null)}return(0,r.useEffect)(()=>{fetch("/api/zoho/user").then(e=>e.ok?e.json():null).then(e=>{(null==e?void 0:e.ok)&&(t(!0),i(e.user))}).catch(()=>{}),fetch("/api/zoho/settings").then(e=>e.json()).then(e=>{let t=e.config||{};l({client_id:t.client_id||"",client_secret:"",base_url:t.base_url||"https://accounts.zoho.com",redirect_uri:t.redirect_uri||"".concat(c.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000","/api/zoho/callback")})})},[]),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"rounded border bg-white p-6",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold",children:"Zoho CRM â€” Easy Setup"}),(0,o.jsx)("p",{className:"text-sm text-neutral-600",children:"Enter your Zoho details here. No need to edit environment variables."}),(0,o.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,o.jsxs)("label",{className:"block text-sm",children:["Region (Accounts Base URL)",(0,o.jsx)("select",{className:"mt-1 w-full rounded border p-2",value:a.base_url||"",onChange:e=>l({...a,base_url:e.target.value}),children:["https://accounts.zoho.com","https://accounts.zoho.eu","https://accounts.zoho.in","https://accounts.zoho.com.au","https://accounts.zohocloud.ca"].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("label",{className:"block text-sm",children:["Redirect URI",(0,o.jsx)("input",{className:"mt-1 w-full rounded border p-2",value:a.redirect_uri||"",onChange:e=>l({...a,redirect_uri:e.target.value})})]}),(0,o.jsxs)("label",{className:"block text-sm",children:["Client ID",(0,o.jsx)("input",{className:"mt-1 w-full rounded border p-2",value:a.client_id||"",onChange:e=>l({...a,client_id:e.target.value}),placeholder:"1000.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),(0,o.jsxs)("label",{className:"block text-sm",children:["Client Secret (optional but recommended)",(0,o.jsx)("input",{className:"mt-1 w-full rounded border p-2",type:"password",value:a.client_secret||"",onChange:e=>l({...a,client_secret:e.target.value})})]})]}),(0,o.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,o.jsx)("button",{onClick:u,className:"rounded bg-black px-4 py-2 text-white",children:"Save Zoho Settings"}),(0,o.jsx)("button",{onClick:h,className:"rounded border px-4 py-2",children:"Connect Zoho"}),(0,o.jsx)("button",{onClick:d,className:"rounded border px-4 py-2",children:"Clear Settings"})]}),(0,o.jsx)("div",{className:"mt-4 rounded border p-3",children:e?(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("span",{className:"text-green-700",children:["Connected as ",(null==n?void 0:n.email)||"Zoho User"]}),(0,o.jsx)("button",{onClick:p,className:"rounded border px-3 py-2",children:"Disconnect"})]}):(0,o.jsx)("div",{className:"text-sm text-neutral-700",children:"Not connected. After saving Client ID (and Secret), click Connect Zoho to authorize."})})]}),(0,o.jsxs)("div",{className:"rounded border bg-white p-6",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold",children:"Export"}),(0,o.jsx)("p",{className:"text-sm text-neutral-600",children:"Export rendered HTML to your ESP or marketing automation platform."})]})]})}},3544:function(e,t,n){"use strict";var o,r;e.exports=(null==(o=n.g.process)?void 0:o.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(325)},325:function(e){!function(){var t={229:function(e){var t,n,o,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();var a=[],l=!1,u=-1;function d(){l&&o&&(l=!1,o.length?a=o.concat(a):u=-1,a.length&&h())}function h(){if(!l){var e=i(d);l=!0;for(var t=a.length;t;){for(o=a,a=[];++u<t;)o&&o[u].run();u=-1,t=a.length}o=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new p(e,t)),1!==a.length||l||i(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},c=!0;try{t[e](s,s.exports,o),c=!1}finally{c&&delete n[e]}return s.exports}o.ab="//";var r=o(229);e.exports=r}()}},function(e){e.O(0,[976,977,844,744],function(){return e(e.s=9326)}),_N_E=e.O()}]);